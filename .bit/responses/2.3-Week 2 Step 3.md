---
files: n/a
stepType: checks
scripts: test.secrets2.js
week: 2
step: 3
name: Week 2 Step 3
---

Week 2 Step 3 ‚¨§‚¨§‚¨§‚óØ‚óØ‚óØ‚óØ‚óØ | üïê Estimated completion: 10-15 minutes

## Building a Webpage with HTML/JS
Congrats! If you made it this far, your Azure function can now return a poem. Users won't want to make POST requests with Postman to use your API though, so let's make it more user friendly.

### ‚úÖ  Task:

- [ ]  Run `git pull` 
- [ ]  Make sure you are in the `week2` branch 
- [ ]  Install [LiveServer](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) for testing
- [ ]  Create a `form` element with: `id="image-form"` and make it call `handle(event)` on submit.
- [ ]  Add an `input` and `button` element inside the `form`.
- [ ]  Create 2 empty `div` elements with `id` values of: `gif` and `poem`.
- [ ]  Send the submitted image in the `form` element to the Azure function with a POST request using a JS file.
- [ ]  Install `parse-multipart` on your Function App and use it to "parse" the image!
- [ ] Commit your code to `week2/index.html` and `week2/index.js`

### üöß Test your Work
Use **[LiveServer](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)**! This is a helpful VSCode extension that allows you to see your HTML that updates while you edit it.

<details>
<summary>:question: How do you use LiveServer? </summary>
<br>

![image](https://user-images.githubusercontent.com/69332964/99007366-0fd21f80-2512-11eb-9af9-311d89098c0b.png)
* To start a local server, click `Go live` at the bottom right of the screen, as shown in the image.
    * Make sure that you have the entire repo open on VS Code and not just the individual files.
    * If this is your first time installing LiveServer, you might need to close/quit VS Code and reopen it.
* Test it out, and see what your HTML page looks like! *It's OK if it's boring, so feel free to style it with CSS!*

</details>

## HTML? How To Meet Leopards?

**Questions to think about:**
* [Intro to HTML](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/HTML_basics)
* [What is an element?](https://www.w3schools.com/html/html_elements.asp)
* What is a [type](https://www.w3schools.com/tags/att_type.asp), [id](https://www.w3schools.com/html/html_id.asp), [attribute](https://www.w3schools.com/html/html_attributes.asp)?
* What is a container?
* What is a form?
* What is [`<script>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script)?

<details>
<summary>:question: How do I format the HTML page?</summary>
</br>

First, add this to the top of your HTML page. This is standard information every page usually has.
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>WHAT'S THIS PROJECT CALLED?</title>

  </head>
```

Create a `body` tag. We're going to be putting code in here.
```html
<body>

  <!--We're putting stuff here!-->

</body>
```

### Create a title container
```html
      <div>
          <h1>Example Project</h1>
          <hr/>
      </div>
```

### Displaying output and entering input
First, create a `div`.
```html
<div>
  <!--We're putting stuff here!-->
</div>
```

**Where is the user going to upload the image?** In a form - make sure to change the values!.
```html
      <form id="fillthisin" onsubmit="fillthisin" enctype="multipart/form-data">
        <div class="form-group">
          <div id="image-div">
            <input type="file" accept="image/*" name="image" id="file""/>
            <button type="submit" class="btn btn-secondary btn-sm">Submit</button>       
      </form>

      <hr/> <!--we're just creating a separation-->
```

> :bulb: Note that the `enctype` is `multipart/form-data`, which is something that needs to be used when you're uploading a file like an image.

**Where will the output be displayed?** Look out below!
```html
      <div id="fillthisin"></div>
      <div id="fillthisin"></div>
```
This is where you'll see the gif and poem pop up!

## jQuery
Lastly, make sure to reference jQuery. Put it **at the very end of the HTML page outside of all the tags!**
```html
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
     
    <script src="config.js" type="text/javascript"></script>
```

**Why?** We will be using [jQuery](https://www.w3schools.com/jquery/jquery_intro.asp) later to display output.
<br><br/>
</details>

## Linking JS and calling the Function

<details>
<summary>:exclamation: How do I access the image from the HTML?</summary>
  </br>
  
  
</details>

<details>
<summary>:exclamation: How do I call the Azure function?</summary>
  </br>
  
  
</details>

<details>
<summary>:exclamation: How can I connect my JS file to my HTML?</summary>
  </br>

  
</details>

## Why do we need `parse-multipart` and what is multipart request?
A **HTTP multipart request** is a HTTP request that HTTP clients construct to send files and data over to a HTTP Server. It is commonly used by browsers and HTTP clients to **upload** files to the server.

Because we want to send an image file through an HTTP Request, we need a piece of software to parse the raw data to extract the image file. Here comes the handy NPM package: `parse-multipart`! 

The raw payload formatted as multipart/form-data will looks like this one:

```
------WebKitFormBoundaryDtbT5UpPj83kllfw
Content-Disposition: form-data; name="uploads[]"; filename="somebinary.dat"
Content-Type: application/octet-stream
some binary data...maybe the bits of a image..
------WebKitFormBoundaryDtbT5UpPj83kllfw
Content-Disposition: form-data; name="uploads[]"; filename="sometext.txt"
Content-Type: text/plain
hello how are you
------WebKitFormBoundaryDtbT5UpPj83kllfw--
```

The lines above represents a **raw multipart/form-data payload** sent by some HTTP client via form submission containing two files. We need to extract the all files contained inside it. The multipart format allows you to send more than one file in the same payload, that's why it is called: multipart.

<details>
<summary>How do I use this package?</summary>
</br>

Notice that `multipart.Parse(body, boundary)`  requires two parameters.  I've already gotten the boundary for you ‚Äì just like the documentation example, our boundary is a string in the format `"----WebKitFormBoundary(random characters here)"`.

In the `multipart.Parse()` call, you need to figure out what the body parameter should be.

> :bulb: **Hint:** It should be the request body. Think about the template HTTP Trigger Azure function. How did we access the body in there?
```js
// here's your boundary:
var boundary = multipart.getBoundary(req.headers['content-type']);
  
// TODO: assign the body variable the correct value
var body = '<WHAT GOES HERE?>'
// parse the body
var parts = multipart.Parse(body, boundary);
```
</details>
